<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of checkInstallation</title>
  <meta name="keywords" content="checkInstallation">
  <meta name="description" content="checkInstallation">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">installation</a> &gt; checkInstallation.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for installation&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>checkInstallation
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>checkInstallation</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function checkInstallation(develMode) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> checkInstallation
   The purpose of this function is to check if all necessary functions are
   installed and working. It also checks whether there are any functions
   with overlapping names between RAVEN and other toolboxes or
   user-defined functions, which are accessible from MATLAB pathlist

   Input: 
   develMode       logical indicating development mode, which includes
                   testing of binaries that are required to update KEGG
                   HMMs (opt, default false)

   Usage: checkInstallation(develMode)</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="checkFunctionUniqueness.html" class="code" title="function checkFunctionUniqueness()">checkFunctionUniqueness</a>	checkFunctionUniqueness</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function res = interpretResults(results)</a></li><li><a href="#_sub2" class="code">function str = myStr(InputStr,len)</a></li><li><a href="#_sub3" class="code">function status = makeBinaryExecutable()</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function checkInstallation(develMode)</a>
0002 <span class="comment">% checkInstallation</span>
0003 <span class="comment">%   The purpose of this function is to check if all necessary functions are</span>
0004 <span class="comment">%   installed and working. It also checks whether there are any functions</span>
0005 <span class="comment">%   with overlapping names between RAVEN and other toolboxes or</span>
0006 <span class="comment">%   user-defined functions, which are accessible from MATLAB pathlist</span>
0007 <span class="comment">%</span>
0008 <span class="comment">%   Input:</span>
0009 <span class="comment">%   develMode       logical indicating development mode, which includes</span>
0010 <span class="comment">%                   testing of binaries that are required to update KEGG</span>
0011 <span class="comment">%                   HMMs (opt, default false)</span>
0012 <span class="comment">%</span>
0013 <span class="comment">%   Usage: checkInstallation(develMode)</span>
0014 
0015 <span class="keyword">if</span> nargin&lt;1
0016     develMode=false;
0017 <span class="keyword">end</span>
0018 
0019 <span class="comment">%Get the RAVEN path</span>
0020 [ST, I]=dbstack(<span class="string">'-completenames'</span>);
0021 [ravenDir,~,~]=fileparts(fileparts(ST(I).file));
0022 
0023 fprintf(<span class="string">'\n*** THE RAVEN TOOLBOX ***\n\n'</span>);
0024 <span class="comment">%Print the RAVEN version if it is not the development version</span>
0025 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking RAVEN release'</span>,40) <span class="string">'%f'</span>]);
0026 <span class="keyword">if</span> exist(fullfile(ravenDir,<span class="string">'version.txt'</span>), <span class="string">'file'</span>) == 2
0027     currVer = fgetl(fopen(fullfile(ravenDir,<span class="string">'version.txt'</span>)));
0028     fclose(<span class="string">'all'</span>);
0029     fprintf([currVer <span class="string">'\n'</span>]);
0030     <span class="keyword">try</span>
0031         newVer=strtrim(webread(<span class="string">'https://raw.githubusercontent.com/SysBioChalmers/RAVEN/main/version.txt'</span>));
0032         newVerNum=str2double(strsplit(newVer,<span class="string">'.'</span>));
0033         currVer=str2double(strsplit(currVer,<span class="string">'.'</span>));
0034         <span class="keyword">for</span> i=1:3
0035             <span class="keyword">if</span> currVer(i)&lt;newVerNum(i)
0036                 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; Latest RAVEN release available'</span>,40) <span class="string">'%f'</span>])
0037                 fprintf([newVer,<span class="string">'\n'</span>])
0038                 hasGit=exist(fullfile(ravenDir,<span class="string">'.git'</span>),<span class="string">'file'</span>);
0039                 <span class="keyword">if</span> hasGit==7
0040                     fprintf(<span class="string">'     Run git pull in your favourite git client\n'</span>)
0041                     fprintf(<span class="string">'     to get the latest RAVEN release\n'</span>);
0042                 <span class="keyword">else</span>
0043                     fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'     Instructions on how to upgrade'</span>,40) <span class="string">'%f'</span>])
0044                     fprintf(<span class="string">'&lt;a href=&quot;https://github.com/SysBioChalmers/RAVEN/wiki/Installation#upgrade-to-latest-raven-release&quot;&gt;here&lt;/a&gt;\n'</span>);
0045                 <span class="keyword">end</span>
0046                 <span class="keyword">break</span>
0047             <span class="keyword">elseif</span> i==3
0048                 fprintf(<span class="string">'   &gt; You are running the latest RAVEN release\n'</span>);
0049             <span class="keyword">end</span>
0050         <span class="keyword">end</span>
0051     <span class="keyword">catch</span>
0052         fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; Checking for latest RAVEN release'</span>,40) <span class="string">'%f'</span>])
0053         fprintf(<span class="string">'Fail\n'</span>);
0054         fprintf(<span class="string">'     Cannot reach GitHub for release info\n'</span>);
0055     <span class="keyword">end</span>
0056 <span class="keyword">else</span>
0057     fprintf(<span class="string">'DEVELOPMENT\n'</span>);
0058 <span class="keyword">end</span>
0059 
0060 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking MATLAB release'</span>,40) <span class="string">'%f'</span>])
0061 fprintf([version(<span class="string">'-release'</span>) <span class="string">'\n'</span>])
0062 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking system architecture'</span>,40) <span class="string">'%f'</span>])
0063 fprintf([computer(<span class="string">'arch'</span>),<span class="string">'\n'</span>])
0064 <span class="keyword">if</span> isunix
0065     fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; Make binaries executable'</span>,40) <span class="string">'%f'</span>])
0066     status = <a href="#_sub3" class="code" title="subfunction status = makeBinaryExecutable()">makeBinaryExecutable</a>();
0067     <span class="keyword">if</span> status == 0
0068         fprintf(<span class="string">'Pass\n'</span>)
0069     <span class="keyword">else</span>
0070         fprintf(<span class="string">'Fail\n'</span>)
0071     <span class="keyword">end</span>
0072 <span class="keyword">end</span>
0073 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Set RAVEN in MATLAB path'</span>,40) <span class="string">'%f'</span>])
0074 subpath=regexp(genpath(ravenDir),pathsep,<span class="string">'split'</span>); <span class="comment">%List all subdirectories</span>
0075 pathsToKeep=cellfun(@(x) ~contains(x,<span class="string">'.git'</span>),subpath) &amp; cellfun(@(x) ~contains(x,<span class="string">'doc'</span>),subpath);
0076 addpath(strjoin(subpath(pathsToKeep),pathsep));
0077 savepath
0078 fprintf(<span class="string">'Pass\n'</span>);
0079 
0080 <span class="comment">%Check if it is possible to parse an Excel file</span>
0081 fprintf(<span class="string">'\n=== Model import and export ===\n'</span>);
0082 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Add Java paths for Excel format'</span>,40) <span class="string">'%f'</span>])
0083 <span class="keyword">try</span>
0084     <span class="comment">%Add the required classes to the static Java path if not already added</span>
0085     addJavaPaths();
0086     fprintf(<span class="string">'Pass\n'</span>)
0087 <span class="keyword">catch</span>
0088     fprintf(<span class="string">'Fail\n'</span>)
0089 <span class="keyword">end</span>
0090 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking libSBML version'</span>,40) <span class="string">'%f'</span>])
0091 <span class="keyword">try</span>
0092     evalc(<span class="string">'importModel(fullfile(ravenDir,''tutorial'',''empty.xml''))'</span>);
0093     <span class="keyword">try</span>
0094         libSBMLver=OutputSBML; <span class="comment">% Only works in libSBML 5.17.0+</span>
0095         fprintf([libSBMLver.libSBML_version_string <span class="string">'\n'</span>]);
0096     <span class="keyword">catch</span>
0097         fprintf(<span class="string">'Fail\n'</span>)
0098         fprintf(<span class="string">'   An older libSBML version was found, update to version 5.17.0 or higher for a significant improvement of model import\n'</span>);
0099     <span class="keyword">end</span>
0100 <span class="keyword">catch</span>
0101     fprintf(<span class="string">'Fail\n'</span>)
0102     fprintf(<span class="string">'   Download libSBML from http://sbml.org/Software/libSBML/Downloading_libSBML and add to MATLAB path\n'</span>);
0103 <span class="keyword">end</span>
0104 fprintf(<span class="string">' &gt; Checking model import and export\n'</span>)
0105 res=runtests(<span class="string">'importExportTests.m'</span>,<span class="string">'OutputDetail'</span>,0);
0106 
0107 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; Import Excel format'</span>,40) <span class="string">'%f'</span>])
0108 <span class="keyword">if</span> res(1).Passed == 1
0109     fprintf(<span class="string">'Pass\n'</span>)
0110 <span class="keyword">else</span>
0111     fprintf(<span class="string">'Fail\n'</span>)
0112 <span class="keyword">end</span>
0113 
0114 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; Export Excel format'</span>,40) <span class="string">'%f'</span>])
0115 <span class="keyword">if</span> res(3).Passed == 1
0116     fprintf(<span class="string">'Pass\n'</span>)
0117 <span class="keyword">else</span>
0118     fprintf(<span class="string">'Fail\n'</span>)
0119 <span class="keyword">end</span>
0120 
0121 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; Import SBML format'</span>,40) <span class="string">'%f'</span>])
0122 <span class="keyword">if</span> res(2).Passed == 1
0123     fprintf(<span class="string">'Pass\n'</span>)
0124 <span class="keyword">else</span>
0125     fprintf(<span class="string">'Fail\n'</span>)
0126 <span class="keyword">end</span>
0127 
0128 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; Export SBML format'</span>,40) <span class="string">'%f'</span>])
0129 <span class="keyword">if</span> res(4).Passed == 1
0130     fprintf(<span class="string">'Pass\n'</span>)
0131 <span class="keyword">else</span>
0132     fprintf(<span class="string">'Fail\n'</span>)
0133 <span class="keyword">end</span>
0134 
0135 <span class="keyword">if</span> res(1).Passed~=1 &amp;&amp; res(3).Passed~=1 &amp;&amp; exist(<span class="string">'vaderSentimentScores.m'</span>,<span class="string">'file'</span>)==2
0136     fprintf([<span class="string">'   &gt; MATLAB Text Analytics Toolbox found. This should be\n'</span><span class="keyword">...</span>
0137              <span class="string">'     uninstalled if you want to read/write Excel files.\n'</span><span class="keyword">...</span>
0138              <span class="string">'     See RAVEN GitHub Issues page for instructions.\n'</span>])
0139 <span class="keyword">end</span>
0140 
0141 <span class="comment">%Check if it is possible to import an YAML model</span>
0142 <span class="comment">% fprintf(' &gt; Checking import of model in YAML format:\t\t\t');</span>
0143 <span class="comment">% try</span>
0144 <span class="comment">%     readYaml(ymlFile,true);</span>
0145 <span class="comment">%     fprintf('Pass\n');</span>
0146 <span class="comment">% catch</span>
0147 <span class="comment">%     fprintf('Fail\n');</span>
0148 <span class="comment">% end</span>
0149 
0150 fprintf(<span class="string">'\n=== Model solvers ===\n'</span>);
0151 
0152 <span class="comment">%Get current solver. Set it to 'none', if it is not set</span>
0153 fprintf(<span class="string">' &gt; Checking for LP solvers\n'</span>)
0154 res=runtests(<span class="string">'solverTests.m'</span>,<span class="string">'OutputDetail'</span>,0);
0155 
0156 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; glpk'</span>,40) <span class="string">'%f'</span>])
0157 <span class="keyword">if</span> res(1).Passed == 1
0158     fprintf(<span class="string">'Pass\n'</span>)
0159 <span class="keyword">else</span>
0160     fprintf(<span class="string">'Fail\n'</span>)
0161 <span class="keyword">end</span>
0162 
0163 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; gurobi'</span>,40) <span class="string">'%f'</span>])
0164 <span class="keyword">if</span> res(2).Passed == 1
0165     fprintf(<span class="string">'Pass\n'</span>)
0166 <span class="keyword">else</span>
0167     fprintf(<span class="string">'Fail\n'</span>)
0168 <span class="keyword">end</span>
0169 
0170 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; cobra'</span>,40) <span class="string">'%f'</span>])
0171 <span class="keyword">if</span> res(3).Passed == 1
0172     fprintf(<span class="string">'Pass\n'</span>)
0173 <span class="keyword">else</span>
0174     fprintf(<span class="string">'Fail\n'</span>)
0175 <span class="keyword">end</span>
0176 
0177 fprintf(<span class="string">' &gt; Checking for MILP solvers\n'</span>)
0178 res=runtests(<span class="string">'fillGapsSmallTests.m'</span>,<span class="string">'OutputDetail'</span>,0);
0179 
0180 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; glpk'</span>,40) <span class="string">'%f'</span>])
0181 <span class="keyword">if</span> res(1).Passed == 1
0182     fprintf(<span class="string">'Pass\n'</span>)
0183     fprintf([<span class="string">'     While passing here, we do not recommended glpk\n'</span><span class="keyword">...</span>
0184              <span class="string">'     for MILPs due to occasional inconsistent results\n'</span>])
0185 <span class="keyword">else</span>
0186     fprintf(<span class="string">'Fail\n'</span>)
0187 <span class="keyword">end</span>
0188 
0189 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; gurobi'</span>,40) <span class="string">'%f'</span>])
0190 <span class="keyword">if</span> res(2).Passed == 1
0191     fprintf(<span class="string">'Pass\n'</span>)
0192 <span class="keyword">else</span>
0193     fprintf(<span class="string">'Fail\n'</span>)
0194 <span class="keyword">end</span>
0195 
0196 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">'   &gt; cobra'</span>,40) <span class="string">'%f'</span>])
0197 <span class="keyword">if</span> res(3).Passed == 1
0198     fprintf(<span class="string">'Pass\n'</span>)
0199 <span class="keyword">else</span>
0200     fprintf(<span class="string">'Fail\n'</span>)
0201 <span class="keyword">end</span>
0202 
0203 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Set RAVEN solver'</span>,40) <span class="string">'%f'</span>])
0204 <span class="keyword">try</span>
0205     oldSolver=getpref(<span class="string">'RAVEN'</span>,<span class="string">'solver'</span>);
0206     solverIdx=find(strcmp(oldSolver,{<span class="string">'glpk'</span>,<span class="string">'gurobi'</span>,<span class="string">'cobra'</span>}));
0207 <span class="keyword">catch</span>
0208     solverIdx=0;
0209 <span class="keyword">end</span>
0210 <span class="comment">% Do not change old solver if functional</span>
0211 <span class="keyword">if</span> solverIdx~=0 &amp;&amp; res(solverIdx).Passed == 1
0212     fprintf([oldSolver <span class="string">'\n'</span>])
0213 <span class="comment">% Order of preference: gurobi &gt; glpk &gt; cobra</span>
0214 <span class="keyword">elseif</span> res(2).Passed == 1
0215     fprintf(<span class="string">'gurobi\n'</span>)
0216     setRavenSolver(<span class="string">'gurobi'</span>);
0217 <span class="keyword">elseif</span> res(1).Passed == 1
0218     fprintf(<span class="string">'glpk\n'</span>)
0219     setRavenSolver(<span class="string">'glpk'</span>);
0220 <span class="keyword">elseif</span> res(3).Passed == 1
0221     fprintf(<span class="string">'cobra\n'</span>)
0222     setRavenSolver(<span class="string">'cobra'</span>);
0223 <span class="keyword">else</span>
0224     fprintf(<span class="string">'None, no functional solvers\n'</span>)
0225     fprintf(<span class="string">'    The glpk should always be working, check your RAVEN installation to make sure all files are present\n'</span>)
0226 <span class="keyword">end</span>
0227 
0228 fprintf(<span class="string">'\n=== Essential binary executables ===\n'</span>);
0229 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking BLAST+'</span>,40) <span class="string">'%f'</span>])
0230 res=runtests(<span class="string">'blastPlusTests.m'</span>,<span class="string">'OutputDetail'</span>,0);
0231 res=<a href="#_sub1" class="code" title="subfunction res = interpretResults(results)">interpretResults</a>(res);
0232 <span class="keyword">if</span> res==false
0233     fprintf(<span class="string">'   This is essential to run getBlast()\n'</span>)
0234 <span class="keyword">end</span>
0235 
0236 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking DIAMOND'</span>,40) <span class="string">'%f'</span>])
0237 res=runtests(<span class="string">'diamondTests.m'</span>,<span class="string">'OutputDetail'</span>,0);
0238 res=<a href="#_sub1" class="code" title="subfunction res = interpretResults(results)">interpretResults</a>(res);
0239 <span class="keyword">if</span> res==false
0240     fprintf(<span class="string">'   This is essential to run the getDiamond()\n'</span>)
0241 <span class="keyword">end</span>
0242 
0243 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking HMMER'</span>,40) <span class="string">'%f'</span>])
0244 res=runtests(<span class="string">'hmmerTests.m'</span>,<span class="string">'OutputDetail'</span>,0);
0245 res=<a href="#_sub1" class="code" title="subfunction res = interpretResults(results)">interpretResults</a>(res);
0246 <span class="keyword">if</span> res==false
0247     fprintf([<span class="string">'   This is essential to run getKEGGModelFromHomology()\n'</span><span class="keyword">...</span>
0248              <span class="string">'   when using a FASTA file as input\n'</span>])
0249 <span class="keyword">end</span>
0250 
0251 <span class="keyword">if</span> develMode
0252     fprintf(<span class="string">'\n=== Development binary executables ===\n'</span>);
0253     fprintf(<span class="string">'NOTE: These binaries are only required when using KEGG FTP dump files in getKEGGModelForOrganism\n'</span>);
0254 
0255     fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking CD-HIT'</span>,40) <span class="string">'%f'</span>])
0256     res=runtests(<span class="string">'cdhitTests.m'</span>,<span class="string">'OutputDetail'</span>,0);
0257     <a href="#_sub1" class="code" title="subfunction res = interpretResults(results)">interpretResults</a>(res);
0258 
0259     fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking MAFFT'</span>,40) <span class="string">'%f'</span>])
0260     res=runtests(<span class="string">'mafftTests.m'</span>,<span class="string">'OutputDetail'</span>,0);
0261     <a href="#_sub1" class="code" title="subfunction res = interpretResults(results)">interpretResults</a>(res);
0262 <span class="keyword">end</span>
0263 
0264 fprintf(<span class="string">'\n=== Compatibility ===\n'</span>);
0265 fprintf([<a href="#_sub2" class="code" title="subfunction str = myStr(InputStr,len)">myStr</a>(<span class="string">' &gt; Checking function uniqueness'</span>,40) <span class="string">'%f'</span>])
0266 <a href="checkFunctionUniqueness.html" class="code" title="function checkFunctionUniqueness()">checkFunctionUniqueness</a>();
0267 
0268 fprintf(<span class="string">'\n*** checkInstallation complete ***\n\n'</span>);
0269 <span class="keyword">end</span>
0270 
0271 <a name="_sub1" href="#_subfunctions" class="code">function res = interpretResults(results)</a>
0272 <span class="keyword">if</span> results.Failed==0 &amp;&amp; results.Incomplete==0
0273     fprintf(<span class="string">'Pass\n'</span>);
0274     res=true;
0275 <span class="keyword">else</span>
0276     fprintf(<span class="string">'Fail\n'</span>)
0277     fprintf(<span class="string">'   Download/compile the binary and rerun checkInstallation\n'</span>);
0278     res=false;
0279 <span class="keyword">end</span>
0280 <span class="keyword">end</span>
0281 
0282 <a name="_sub2" href="#_subfunctions" class="code">function str = myStr(InputStr,len)</a>
0283 str=InputStr;
0284 lenDiff = len - length(str);
0285 <span class="keyword">if</span> lenDiff &lt; 0
0286     warning(<span class="string">'String too long'</span>);
0287 <span class="keyword">else</span>
0288     str = [str blanks(lenDiff)];
0289 <span class="keyword">end</span>
0290 <span class="keyword">end</span>
0291 
0292 <a name="_sub3" href="#_subfunctions" class="code">function status = makeBinaryExecutable()</a>
0293 <span class="keyword">if</span> ispc
0294     status = 0; <span class="comment">% No need to run on Windows</span>
0295     <span class="keyword">return</span>;
0296 <span class="keyword">elseif</span> ismac
0297     binaryEnd=<span class="string">'.mac'</span>;
0298 <span class="keyword">else</span>
0299     binaryEnd=<span class="string">''</span>;
0300 <span class="keyword">end</span>
0301 
0302 binaryList = {<span class="string">'blastp'</span>,<span class="string">'makeblastdb'</span>,<span class="string">'diamond'</span>,<span class="string">'cd-hit'</span>,<span class="string">'hmmbuild'</span>,<span class="string">'hmmsearch'</span>};
0303 binaryList = strcat(binaryList,binaryEnd);
0304 binaryList = [binaryList, <span class="string">'TranslateSBML'</span>,<span class="string">'OutputSBML'</span>,<span class="string">'glpkcc'</span>,<span class="string">'mafft.bat'</span>];
0305 <span class="keyword">for</span> i=1:numel(binaryList)
0306     binPath = which(binaryList{i});
0307     [status,cmdout] = system([<span class="string">'chmod +x &quot;'</span> binPath <span class="string">'&quot;'</span>]);
0308     <span class="keyword">if</span> status ~= 0
0309         error(<span class="string">'Failed to make %s executable: %s '</span>,binaryList{i},strip(cmdout))
0310     <span class="keyword">end</span>
0311 <span class="keyword">end</span>
0312 <span class="keyword">end</span></pre></div>
<hr><address>Generated by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>